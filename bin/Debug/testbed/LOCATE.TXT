>'LOCATE/TXT>N58/w68/p80/a4>Z99/i0/R10/T11/z>Z98/i0/R5/T6/z>H1/n1>i0/hINSTRUCTIONS FOR USING LOCATE/CMD - Page #====================================================================>X>F1>i0===== PUBLIC DOMAIN SOFTWARE for NEWDOS86 by W.S. & D.S. SANDS =====>X>T6 >t/U/Bлоцате (or WHERE THE CURSOR IS) >Uoff/Boff>toffLOCATE/CMD is a PSFile that installs into the interrupt chain.  This program has its major application while in BASIC but there could be other areas of use.
The program displays the current cursor address on the top left corner of the screen in the PRINT@ [row,column] format.  The main use would be in designing screen displays -- with the ELE allowing you to place the cursor anywhere chosen on the screen and reading the address given by LOCATE to type into your Basic program.The listing is fairly well documented but a couple of points may be of interest.  The program can be activated while at DOS ready or from BASIC.  When installed from BASIC, all variables are cleared and return is made to BASIC ready.
The routine loads into the DOS overlay area and checks to see that it has been invoked from DOS or BASIC.  If so, it then moves the major portion of the code into BASIC overlay area #1 at 6A00H and jumps to 6A00H to do the actual installation.The first requirement is to patch the code if it is running on a Model III/4/4P.  Also since the 4/4P can support 80x24 video, a different method is required to determine the actual row and column values.  This is achieved by overwriting the Model I code with the necessary changes.  The code is then moved to the top of high memory, various pointers are updated and the code is then installed into the DOS interrupt chain by loading register DE with the start address of the routine and calling 4410H.You may have noticed the 4 byte header at the very front of the interrupt driver.  NEWDOS uses this 4 byte area in the following manner:  Bytes 1 and 2 store the address of the next interrupt routine; when this has a value of 0000H then NEWDOS knows that all USER interrupt routines have been serviced.  Byte 3 is the number of 25mS interrupts between each servicing of the routine, while byte 4 is the actual counter.

Our routine has a value of 4 in byte 3, this means that NEWDOS will access our routine every 4 interrupts i.e.  every 100mS (4x25).  The 120 in byte 4 allows about 3 seconds to pass before the routine is initially serviced.  This allows the BASIC pointers to be updated before the routine is accessed for the first time.Every time an interrupt occurs, NEWDOS decrements the value in byte 4, when it reaches zero the value in byte 3 is placed into byte 4 and the routine is accessed.>fThe routine is installed with the command:-               LOCATE  <enter>and as with all the routines installed in the interrupt routines, doing a DOS CLEAR will remove them from the interrupt chain.  If you wish to zero memory, use CLEAR,* as this will leave user routines intact.>t----------<ND86>---------->x