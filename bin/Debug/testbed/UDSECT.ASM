ÓUDSECT°°°±° ;°°°²° ;	DSM DUMY CONTROL SECTION (DSECT)°°°³° ;°°°´° ;   THE FOLLOWING CONTROL BLOCKS AND TABLES ARE PROVIDED°°°µ° ;FOR THE ADVANCED USER OF DSM.  THE USE OF SOME OF THIS°°°¶° ;INFORMATION MIGHT BE USEFUL FOR CREATING SPECIAL USER°°°·° ;INPUT/OUTPUT PROCESSING ROUTINES.  REFER TO APPENDIX A.°°°¸° ;(uSER EXIT ROUTINES) FOR ADDITIONAL INFORMATION.°°°¹° ;°°±°° ;   A GRAPHIC DISPLAY OF THE CONTROL BLOCKS DURING°°±±° ;EXECUTION CAN BE SEEN BY RUNNING WITH MSGLEVEL=5.  nOTE°°±²° ;THAT VARIABLES BCBTBA, VCBTBA, FCBTBA, AND SCTBA IN THE°°±³° ;COMMUNICATIONS ROUTINES CONTAIN THE CURRENT ADDRESS TO°°±´° ;THE START OF EACH CONTROL BLOCK AREA.°°±µ° ;°°±¶° ;   THE USRIN AND USROUT VARIABLES IN THE COMMUNICATIONS°°±·° ;ROUTINE WILL CONTAIN "OR A", AND "RET" INSTRUCTIONS°°±¸° ;IF NOT ACTIVATED, OTHERWISE THESE WILL BE REPLACED BY°°±¹° ;"JP USER" INSTRUCTIONS BY DSM.  THE USER MAY DEACTIVATE °°²°° ;THE EXIT ROUTINES AT ANY TIME BY INSERTING THE ORIGINAL°°²±° ;"OR A" AND "RET" INSTRUCTIONS.°°²²° ;°°²³° ;°°²´° ;°°²µ° ;°°²¶° ;	BUFFER CONTROL BLOCK DSECT°°²·° ;°°²¸° BCB:	DEFL	0	;BUFFER CONTROL BLOCK°°²¹° BCBST2:	DEFL	BCB	;STATUS OF BCB AS FOLLOWS:°°³°° ;		BIT-0/3	 NOT USED°°³±° ;		BIT-4	 BUFFER PRIMED°°³²° ;		BIT-5    EOF DETECTED°°³³° ;		BIT-6	 EXT-->INT TRANSLATION°°³´° ;		BIT-7    INT-->EXT TRANSLATION°°³µ° BCBFCB:	DEFL	BCB+1	;POINTER TO FCB°°³¶° BCBDCB:	DEFL	BCB+3	;POINTER TO DCB°°³·° BCBUFA:	DEFL	BCB+5	;CURR BYTE ADDRESS IN BUFFER°°³¸° BCBUFS:	DEFL	BCB+7	;BUFFER START ADDRESS°°³¹° BCBGRN:	DEFL	BCB+9	;SECTOR IN GRANULE°°´°° BCBBYT:	DEFL	BCB+10	;#BYTES PROCESSED IN BUFFER°°´±° BCBSEC:	DEFL	BCB+11	;NEXT SECTOR #°°´²° BCBRC:	DEFL	BCB+13	;NEXT RECORD # CURRENT°°´³° BCBRE:	DEFL	BCB+15	;RECORD # END°°´´° BCBXS:	DEFL	BCB+17	;REC AREA START°°´µ° BCBXC:	DEFL	BCB+19	;-#REC'S REMAINING IN AREA°°´¶° BCBXE:	DEFL	BCB+21	;REC AREA END°°´·° BCBXM:	DEFL	BCB+23	;MAXIMUM # REC'S/AREA°°´¸° BCBLEN:	DEFL	25°°´¹° ;°°µ°° ;	EXINT/INEXT CONTROL BLOCK DSECT°°µ±° ;°°µ²° EXTYP:	DEFL	0	;TYPE FIELD AS FOLLOWS:°°µ³° ;		BIT-0/3	 1=CH, 2=BI, 3=BU, 4=SP, 5=DP°°µ´° ;			 6=FX, 13=ORDER, 14=ZERO PAD°°µµ° ;			 15=BLANK PAD°°µ¶° ;		BIT-4	 KEY FIELD°°µ·° ;		BIT-5	 KEEP FIELD°°µ¸° ;		BIT-6	 ASC=0, DESC=1°°µ¹° ;		BIT-7	 KEEP PROCESSED°°¶°° EXWID:	DEFL	1	;WIDTH FIELD°°¶±° EXMOD:	DEFL	2	;WIDTH MODIFIER°°¶²° EXLOC:	DEFL	3	;LOCATION (RELATIVE 0)°°¶³° EXLEN:	DEFL	4	;LENGTH EXINT/INEXT°°¶´° ;°°¶µ° ;	SORT CONTROL BLOCK DSECT°°¶¶° ;°°¶·° SCB:	DEFL	0	;SORT CONTROL BLOCK°°¶¸° SCBNBL:	DEFL	0	;NUMBER BLOCKS IN SCB°°¶¹° SCBAVE:	DEFL	SCB-2	;ADDRESS NEXT ACTIVE ENTRY°°·°° SCBFCB:	DEFL	SCB-4	;POINTER TO FCB°°·±° SCBREC:	DEFL	SCB-1	;NUMBER RECORDS IN BLOCK°°·²° SCBSEC:	DEFL	SCB-3	;START SECTOR OF BLOCK°°·³° SCBBYT:	DEFL	SCB-4	;START BYTE IN BUF OF BLOCK°°·´° SCBLEN:	DEFL	5	;LENGTH SCB°°·µ° ;°°·¶° ;	FILE CONTROL BLOCK DSECT°°··° ;°°·¸° FCB:	DEFL	0	;FILE CONTROL BLOCK°°·¹° FCBST1:	DEFL	FCB	;FCB STATUS AS FOLLOWS:°°¸°° ;		BIT-0	 LINKED FILE ENTRY°°¸±° ;		BIT-1	 SORT INPUT FILE°°¸²° ;		BIT-2	 SORT BLOCK "°°¸³° ;		BIT-3	 SORT DISK  "°°¸´° ;		BIT-4	 SORT/MERGE OUTPUT FILE°°¸µ° ;		BIT-5	 MERGE INPUT FILE°°¸¶° ;		BIT-6	 NOT USED°°¸·° ;		BIT-7	 FREE FCB ENTRY°°¸¸° FCBVCB:	DEFL	FCB+1	;POINTER TO VCB°°¸¹° FCBLNK:	DEFL	FCB+3	;INTERNAL LINKED FILE°°¹°° FCBREC:	DEFL	FCB+5	;MAX # RECORDS°°¹±° FCBDSL:	DEFL	FCB+7	;DATASET NAME LENGTH°°¹²° FCBDSN:	DEFL	FCB+8	;DATASET NAME°°¹³° FCBLEN:	DEFL	30°°¹´° ;°°¹µ° ;°°¹¶° ;	VOLUME CONTROL BLOCK DSECT°°¹·° ;°°¹¸° VCB:	DEFL	0	;VOLUME CONTROL BLOCK°°¹¹° VCBST4	DEFL	VCB  	;VOLUME STATUS AS FOLLOWS:°±°°° ;		BIT-0/3	 NOT USED°±°±° ;		BIT-4	 MOUNTED°±°²° ;		BIT-5	 INPUT°±°³° ;		BIT-6	 OUTPUT°±°´° ;		BIT-7	 WORK°±°µ° VCBUCB:	DEFL	VCB+1	;POINTER TO UNIT CONTROL BLOCK°±°¶° VCBVOL:	DEFL	VCB+3	;VOLUME NAME°±°·° VCBLEN:	DEFL	11	;LENGTH OF VCB°±°¸° ;°±°¹° ;	UNIT CONTROL BLOCK DSECT°±±°° ;°±±±° UCB:	DEFL	0	;UNIT CONTROL BLOCK°±±²° UCBST5:	DEFL	UCB	;UCB STATUS AS FOLLOWS:°±±³° ;		BIT-0/3	 CYCLE LAST USED COUNT°±±´° ;		BIT-4/5	 NOT USED°±±µ° ;		BIT-6	 IN USE°±±¶° ;		BIT-7	 AVAILABLE°±±·° UCBVCB:	DEFL	UCB+1	;POINTER TO VCB°±±¸° UCBNUM:	DEFL	UCB+3	;UCB NUMBER°±±¹° UCBLEN:	DEFL	4°±²°° ;°±²±° ;	DATA CONTROL BLOCK EXTENDED DSECT°±²²° ;°±²³° DCBE:	DEFL	0	;DATA CONTROL BLOCK EXTENDED°±²´° DCBST:	DEFL	DCBE	;DCB STATUS AS FOLLOWS:°±²µ° ;		BIT-0/4	 NOT USED°±²¶° ;		BIT-5	OPEN°±²·° ;		BIT-6	 ALLOCATED°±²¸° ;		BIT-7	 FREE°±²¹° DCB:	DEFL	DCBE+1	;DATA CONTROL BLOCK ENTRY°±³°° DCBUFA:	DEFL	DCB+3	;BUFFER ADDR IN DCB	*°±³±° DCBCBT:	DEFL	DCB+5	;OFFSET BYTE CURR REC	*°±³²° DCBDSK:	DEFL	DCB+6	;DISK DRIVE #		*°±³³° DCBMBT:	DEFL	DCB+8	;OFFSET BYTE LAST REC	*°±³´° DCBLRL:	DEFL	DCB+9	;LRECL			*°±³µ° DCBNRN:	DEFL	DCB+10	;NEXT RECORD NUMBER	*°±³¶° DCBERN:	DEFL	DCB+12	;ENDING RECORD NUMBER	*°±³·° DCBLEN:	DEFL	33	;LENGTH OF DCBE ENTRY	*°±³¸° ;°±³¹° ;	SYSTEM I/O ENTRY POINTS°±´°° ;°±´±° RSOPEN:	EQU	4424H°±´²° RSPOSN:	EQU	4442H°±´³° RSREAD:	EQU	4436H°±´´° RSWRIT:	EQU	4439H°±´µ° RSVERF:	EQU	443CH°±´¶° RSCLSE:	EQU	4428H°±´·° RSLOAD:	EQU	4430H°±´¸° RSINIT:	EQU	4420H°±´¹° RSBKSP:	EQU	4445H°±µ°° ;°±µ±° ;	STACK POINTER AREA°±µ²° ;°±µ³° 	ORG	5200H°±µ´° 	DEFS	255°±µµ° MYSP:	DEFS	1°±µ¶° ;°±µ·° ;	TRANSFER VECTOR°±µ¸° ;°±µ¹° TRVECT:	DEFS	0		;DSMSVC TRANSFER VECTOR°±¶°° ERROR:	DEFS	3		;GENERAL ERROR ROUTINE°±¶±° IOERR:	DEFS	3		;I/O ERROR ROUTINE°±¶²° ERINT:	DEFS	3		;INTERNAL ERROR°±¶³° DISPIT:	DEFS	3		;DISPLAY TO X'00'°±¶´° DISPNB:	DEFS	3		;DISPLAY "B" BYTES°±¶µ° DISPLN:	DEFS	3		;DISPLAY TO X'00'+CR°±¶¶° DISPLY:	DEFS	3		;DISPLAY ONE BYTE°±¶·° CFTB:	DEFS	3		;CONVERT FIELD TO BINARY°±¶¸° RETDOS:	DEFS	3		;RETURN TO DOS°±¶¹° PRTBYT:	DEFS	3		;PRINT ONE BYTE°±·°° CDEC:	DEFS	3		;CONVERT TO DECIMAL°±·±° LINK:	DEFS	3		;LINK TO PROGRAM°±·²° LOAD:	DEFS	3		;LOAD MODULE°±·³° TSTIO:	DEFS	3		;TEST I/O RC°±·´° CHEXB:	DEFS	3		;CONVERT BYTE TO HEX°±·µ° PBLNK:	DEFS	3		;PRINT BLANKS°±·¶° PHEXB:	DEFS	3		;PRINT HEX NIBBLE PAIR°±··° PHEXW:	DEFS	3		;PRINT HEX WORD QUAD°±·¸° BUGTAB:	DEFS	3		;PRINT TABLES VIA OPT°±·¹° BUGMSG:	DEFS	3		;PRINT MSG VIA OPT°±¸°° USRIN:	DEFS	3		;USER SORT INPUT EXIT°±¸±° USROUT:	DEFS	3		;USER SORT OUTPUT EXIT°±¸²° ;°±¸³° 	ORG	TRVECT+80H	;DSMIO TRANSFER VECTOR°±¸´° ;°±¸µ° ALWRK:	DEFS	3		;ALLOCATE WORK FILE°±¸¶° GETLR:	DEFS	3		;GET LOGICAL RECORD°±¸·° PRGET:	DEFS	3		;PRIME INPUT°±¸¸° MDISK:	DEFS	3		;MOUNT DISK°±¸¹° CATWF:	DEFS	3		;CONCAT WORK FILE°±¹°° CATNF:	DEFS	3		;CONCAT NEXT FILE°±¹±° SMFCB:	DEFS	3		;SEARCH FCB°±¹²° PUTLR:	DEFS	3		;PUT LOGICAL RECORD°±¹³° PRPUT:	DEFS	3		;PRIME OUTPUT°±¹´° PUTCL:	DEFS	3		;PUT CLOSE°±¹µ° MOUNT:	DEFS	3		;MOUNT SYSRES°±¹¶° ;°±¹·° ;	COMMUNICATION AREA°±¹¸° ;°±¹¹° 	ORG	TRVECT+100H	;TEMPORARY FOR NOW°²°°° ;°²°±° SAVSP:	DEFS	2		;SP ON ENTRY TO SORT°²°²° BADSP:	DEFS	2		;SP AT TIME OF ERROR°²°³° ENDMEM:	DEFS	2		;ADDRESS LAST USABLE MEM°²°´° ENDWRK:	DEFS	2		;END WORK AREA IN MEMORY°²°µ° STWRK:	DEFS	2		;START WORK AREA  "°²°¶° OPTPRT:	DEFS	1		;PRINT OPTION°²°·° OPTMSG:	DEFS	1		;MSGLEVEL OPTION°²°¸° OPTBKY:	DEFS	1		;BAD KEY OPTION°²°¹° OPTBIO:	DEFS	1		;BAD I/O OPTION°²±°° OPTORD:	DEFS	1		;ORDER OPTION°²±±° OPTMRG:	DEFS	1		;MAX DSMD MERGE ORDER°²±²° IOTYPE:	DEFS	1		;I/O TYPE AS FOLLOWS:°²±³° ;				 0=BLOCKED°²±´° ;				 1=SPANNED°²±µ° ;				 2=FIXED°²±¶° ; 				3=VARIABLE°²±·° ;				 4=SEQUENTIAL°²±¸° ILRECL:	DEFS	2		;INTERNAL LRECL°²±¹° ELRECL:	DEFS	2		;INPUT EXTERNAL LRECL°²²°° XLRECL:	DEFS	2		;OUTPUT EXTERNAL LRECL°²²±° KLEN:	DEFS	2		;KEY LENGTH°²²²° EXINTA:	DEFS	2		;ADDRESS EXINT TABLE°²²³° INEXTA:	DEFS	2		;ADDRESS INEXT TABLE°²²´° FCBTBA:	DEFS	2		;ADDRESS FCB TABLE°²²µ° VCBTBA:	DEFS	2		;ADDRESS VCB TABLE°²²¶° BCBTBA:	DEFS	2		;ADDRESS BCB TABLE°²²·° BCBACT:	DEFS	2		;ACTIVE BCB°²²¸° SCBTBA:	DEFS	2		;SORT CONTROL BLOCK ADDR°²²¹° SRTFCB:	DEFS	2		;SORTIN FCB OR ZERO°²³°° FIELD:	DEFS	8		;FIELD FOR BIN-->ASCII°²³±° DELIM:	DEFS	1		;DELIMETER FOR FIELD°²³²° NXTSCB:	DEFS	2		;NEXT AVAIL SCB°²³³° SEQNUM:	DEFS	2		;ORDER SEQ #°²³´° DUMVCB:	DEFS	11		;DUMMY VCB SYSRES MOUNT°²³µ° 	DEFS	10		;PADDING°²³¶° ;°²³·° ;	UCB/DCB AREA°²³¸° ;°²³¹° NUCB:	EQU	4°²´°° UCB1:	DEFS	UCBLEN°²´±° UCB2:	DEFS	UCBLEN°²´²° UCB3:	DEFS	UCBLEN°²´³° UCB4:	DEFS	UCBLEN°²´´° ;°²´µ° ;	LARGE RESERVED BLOCKS°²´¶° ;°²´·° 	ORG	TRVECT+180H°²´¸° GETBUF:	DEFS	256		;INTERNAL I/O BUFFER°²´¹° LOADCB:	EQU	GETBUF		;LOAD/LINK DCB	       **°²µ°° ;°²µ±° LENCOM:	EQU	$-SAVSP		;LENGTH COMM AREA	*°²µ²° ;°²µ³° ;	START SERVICE ROUTINES°²µ´° ;°²µµ° SERVIC:	EQU	$		;START SERVICE RTNS°²µ¶° ;°²µ·° ;	ORIGIN OF SORT PHASE ROUTINES°²µ¸° ;°²µ¹° 	ORG	SERVIC+1000H°²¶°° ;°²¶±° SORTPH:	DEFS	0		;START SORT PHASES°²¶²° ;°²¶³° *LIST ON°²¶´° ;--------------------------------------------------------°²µµ° SERVIC:	EQU	$		;START SERVICE RTNS°²µ¶° ;°²µ·° ;	ORIGIN OF SORT PHASE ROUTINES°²µ¸° ;°²µ¹° 	ORG	SERVIC+1000H°²¶°° ;°²¶±° SORTPH:	DEFS	0		;START SORT PHASES°²¶²° ;°²¶³° *LIST ON°²