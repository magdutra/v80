AGCAP/CMD version 5.3 documentation.------------------------------------General information.--------------------AGCAP/CMD is a program that can find the correct PDRIVE-settings for any diskette, formated by NEWDOS/80 v2.0. Theprogram runs on a TRS-80 Model 1, Model 3, as well as on aModel 4(P) in Model-3-mode. The program even runs in the 80x24display mode under NEWDOS/80, although the display will bemessed up.No special versions of the program are needed for the differentmodels it runs on, one program fits all systems. There are twoexceptions to this, however, but you don't have to worry aboutit if you have a standard NEWDOS/80 system. More about thislater.From version 5.0 on, the program can take in account thepresence of an active Ramdisk program from Seatronics, which iswidely spread in The Netherlands an Belgium. Specifically forthis occasion, the R-parameter is added to the program.History.--------AGCAP/CMD version 2.4 was brought out on diskette 63 fromn theDutch TRS&PC Gebruikers Vereniging, section Breda, on April 23,1988. This version did all it had to do, but more user-friend-liness was being asked for in relation to adding parameters.Version 3.2 was released in August 1988 through the DutchBulletin Board System NIXBBS in Amsterdam, now residing inAlmere. If no drivenumber was given as a parameter at the startof the program, it would ask for it. Now the program could bestarted from within programs like CoDir, TurboDir, NDU andother "shell-like" programs.Version 3.3 added the possibility to exit the program beforeending by pressing the BREAK-key. The original PDRIVE-settingsremained unchanged on exit. This version was only released to asmall number of people.From March 1990 through May 1990 a great number of new versionsfollowed. Being a Dutch program, all user information waspresented in Dutch. Version 4.0 was equal to version 3.3,except for the fact that this version would supply informationin English, keeping in mind that an international release ofthe program could follow. Version 4.0 was never released.Version 5.0 brings compatibility with the Ramdisk program fromSeatronics for the Model 4(p). The R-parameter is being addedto the program.Version 5.1 will ask if the Seatronics Ramdisk program isactive if the R-parameter is not given and the program detectsthat it is working on a Model 4(p).From version 5.2 on, the information provided by using the R-parameter is being checked by the program by examining thestatus table of the Ramdisk program. If necessary, properaction is taken. If no parameters have been added by the user,the program asks for them. By pressing BREAK, the program willexit without changing anything in the system.Also, the CRAFT-80 logo has been added to the program, to showthe programmer's appreciation for the help he received whileworking on the program. This logo is being used by the CRAFT-80Group, a group of people working together to create highquality hard- and software for the TRS-80 and PC's.Version 5.3 brought some very important changes. The algorithmfor using the WRDIRP command and double step possibilities hasbeen totally redesigned. A status window has been added, toshow the progress of the program in finding the right PDRIVE-settings.Versions 3.3 through 5.2 have been released to a very smallgroup of people. This version 5.3 will be brought out on alarger scale.System requirements.--------------------As said before, the program can find out which PDRIVE-settingswere used to format a NEWDOS/80 diskette. It is not possible toread diskettes made by other DOSses.The program will find out if the unknown diskette is formatedin double or single density, single or double sided, 35, 40 or80 tracks (or in between that number), Model 1 or Model 3, etc.Some restrictions must be kept in mind, however.To read a double density diskette, the system must be able towork in double density, so a double density controller isneeded on the Model 1. The Model 3 and Model 4(p) already havedouble density controllers and can also read single densitydiskettes.To read a double sided diskette, a double sided diskdrive must,of course, be used. Also, a drive capable of reading/writing 80tracks must be used to read 80 track diskettes. These drivescan also read 40 track diskettes in double step mode, issued bythe program if necessary.To have full profit of this program, you will need an 80 trackdouble sided diskdrive, but even with only a single sided 40track diskdrive, there are a lot of possibilities to set thePDRIVE to, so the program can still be of great use then.The program can be of significant use if you receive a lot ofstrangely formated diskettes from other TRS-80 NEWDOS/80 usersor if you just bought someones software library.Problem diskettes.------------------If the file BOOT/SYS from the unknown diskette has been alteredso that sector 2 of the diskette does not contain the originaldata, AGCAP/CMD can't find the correct PDRIVE-settings. Somepeople have altered BOOT/SYS to display another message than"NO SYS" if the diskette is used to boot the computer. Althoughthis is a nicer way to say you have to use another diskette,the important data the system needs from sector 2 have beencorrupted.Fortunately, most of these diskettes use a standard Model 1 orModel 3 Pdrive-setting. Try one of the next two settings onthese diskettes.TI=A,TD=A,TC=40,SPT=10,TSR=3,GPL=2,DDSL=17,DDGA=2for Model 1 diskettes, orTI=A,TD=E,TC=40,SPT=18,TSR=3,GPL=2,DDSL=17,DDGA=2for Model 3/4(p) diskettes.(Using a Model 1, change TI=A in the last settings to TI=C,TI=D or TI=E, according to the type of interface you have.)If you're not able to read the directory rightaway, try usingthe WRDIRP command first. If this doesn't work, try to get intouch with the supplier of the diskette.Starting the program.---------------------The program can be started in two ways. The simplest way is tojust type in the name of the program (AGCAP) and press ENTER.The program will ask for the number of the drive to use. If theprogram is being run on a Model 3 or Model 4(p) you will beasked if the Seatronics Ramdisk program is active. If it is,press the R-key, else just press ENTER. If you pressed R, theprogram will check if it needs to be adjusted and will do so ifnecessary.The second way to start the program is to make use of one ortwo parameters. Type the name of the program (AGCAP) followedby a comma (or space), an R and the number of the drive to beused if the Ramdisk program is active. Just ommit the letter R,and the program will assume the Ramdisk program is not active.Do NOT use the R-parameter if you are not using the SeatronicsRamdisk program, but some other. Results will be unpredictable.Examples.---------AGCAP<ENTER>Start without parameters. The program will ask for thedrivenumber to be used and if the Ramdisk is active.AGCAP,1<ENTER>Start using drivenumber 1. No adjustments for an active Ramdiskwill be made.AGCAP,R2<ENTER>Start if Ramdisk is active, using drivenumber 2.AGCAP,3R<ENTER>FAULT ! The R-parameter must preceed the drivenumber.Patches.--------It is not desirable to make patches to a program withoutunderstanding what is going on in the program. In some cases,however, it is necessary to make patches to AGCAP/CMD.The program has been developped to be used under NEWDOS/80 onthe Model 1, 3 and 4(p). Although most floppy controllers usedin the Models 3 and 4(p) are pretty standard, things aredifferent for the Model 1. Most european users have installed aPERCOM doubler (TI=C) for use of double density, but a fewusers do have an LNW controller (TI=E) or a TANDY doubler(TI=D).For those latter users, two JCL-files are provided to patchAGCAP/CMD, so they can work with version 5.3 of AGCAP as well.Users of a PERCOM doubler or Model 3 and 4(p) users don't needany changes in the program.The patches will be made automatically by the JCL-files, usingSUPERZAP, so be sure to have SUPERZAP available to the system.To use AGCAP/CMD with an LNW controller, run AGCAPE/JCL and thenecessary patches will be made. Run AGCAPD/JCL to use AGCAPwith a Tandy controller. The new versions will be labeled 5.3eand 5.3d respectively, so they will be recognizable at startup.Please do not apply these patches to your master diskette.AGCAP will set the TSR parameter to TSR=3, just to be sure thecomputer will be able to work with the diskdrives used, even ifthe original PDRIVE setting of your system diskette was setdifferently or if the TSR parameter of the PDRIVE settings ofthe unknown disk wasn't set to 3. If you want to use theTSR setting from the unknown diskette, patch AGCAP/CMD byrunning the AGCAPT/JCL file. The version number will be 5.3f.It might be better to install this patch before using AGCAPEor AGCAPD.Further developments.---------------------Keeping in mind the rich history of AGCAP/CMD, the program willbe subject to new developments in the time to come. Furtherimprovements will depend upon feedback and cooperation from theusers. If you find a diskette known to be formated by NEWDOS/80whose PDRIVE settings can't be found by AGCAP/CMD, please sendan exact copy of it to :THE CRAFT-80 GROUPPOSTBUS 734854 ZH BAVELTHE NETHERLANDS.Please give a short explanation of the system you used, likeModel, DOS-version, AGCAP-version and possibly the correctPDRIVE settings. The program will be updated if possible andthe new version will be sent to you if you pay for postage andhandling by sending a $5 bill along with the diskette.You can send your remarks and recommendations to the same address.  