ÓPARK30°°°°· ;******************°°°±´ ;*    PARK/CMD    *°°°²± ;******************°°°²¸ ;°°°³µ ;This routine will park the hard°°°´² ;disk drive to cylinder 306. DO NOT°°°´¹ ;activate from hard drive!°°°µ¶ ;°°°¶³ 	ORG	5200H°°°·° ENTRY	PUSH	HL		;SAVE REGISTERS°°°·· 	PUSH	DE°°°¸´ 	PUSH	BC°°°¹± 	PUSH	AF°°°¹¸ 	PUSH	IX°°±°µ 	PUSH	IY°°±±² 	LD	HL,MSG		;DISPLAY MESSAGE°°±±¹ 	CALL	DOSDIS°°±²¶ START	IN	A,(0CFH)	;STATUS REGISTER°°±³³ 	BIT	7,A		;BUSY?°°±´° 	JR	Z,SETCYL°°±´· 	CALL	KBSCAN°°±µ´ 	CP	05BH		;UP ARROW KEY?°°±¶± 	JP	Z,DOSEXT	;ABORT°°±¶¸ 	JR	START		;TRY AGAIN°°±·µ SETCYL	LD	A,01H		;SET CYLINDER HIGH°°±¸² 	OUT	(0CDH),A°°±¸¹ 	LD	A,31H		;SET CYLINDER LOW°°±¹¶ 	OUT	(0CCH),A°°²°³ 	LD	A,070H		;SEEK°°²±° 	OUT	(0CFH),A°°²±· 	LD	B,00H°°²²´ 	DJNZ	$-1		;WAIT°°²³± 	IN	A,(0CFH)	;STATUS REGISTER°°²³¸ 	BIT	4,A		;SEEK COMPLETE°°²´µ 	JR	Z,START		;START OVER°°²µ² 	POP	IY		;RESTORE REGISTERS°°²µ¹ 	POP	IX°°²¶¶ 	POP	AF°°²·³ 	POP	BC°°²¸° 	POP	DE°°²¸· 	POP	HL°°²¹´ 	RET°°³°± MSG	DEFM	'Parking to Cyl #306'°°³°¸ 	DEFB	0DH°°³±µ KBSCAN	EQU	002BH°°³²² DOSEXT	EQU	402DH°°³²¹ DOSDIS	EQU	4467H°°³³¶ 	END	ENTRY