                                             nOVEMBER 19, 1981sKIP,     eNCLOSED YOU WILL FIND 2 DISKETTES.  oNE IS mOD i AND ONE IS mOD iii.  bOTH CONTAIN trsdos.  oN EACH ARE 2 IDENTICAL PROGRAMS.  oNE IS CALLED demo.  bOOT IN THE DISK FOR INSTRUCTIONS ON HOW TO RUN IT.  iN THIS PROGRAM, YOU WILL SEE HOW TO MAKE THE usr CALL TO THE APPROPRIATE ROUTINES.  tHE DISK READ ROUTINE WILL AUTOMATICALLY DETECT WHICH MACHINE IS RUNNING (mOD i OR iii) AND BRANCH TO THE APPROPRIATE CODE.  tHE ROUTINE IS ABOUT 290 BYTES LONG, AND YOU WILL HAVE TO SET MEMORY SIZE TO 65245 WHEN YOU ENTER basic.  pLEASE LET ME KNOW IF YOU NEED ROUTINES FOR DIFFERENT k MACHINES.     tHE PROGRAM THAT YOU WILL INITIALLY RUN WILL BE menu.  tHIS PROGRAM POKES IN THE MACHINE LANGUAGE ROUTINE INTO HIGH MEMORY, THEN RUNS THE PROGRAM demo.  yOU CAN CHANGE THIS PROGRAM TO ANYTHING YOU LIKE.  yOU CAN ALSO PACK THE data STATEMENTS ONTO FEWER LINES TO MAKE THE PROGRAM SHORTER.     tHE SECTOR CHECK ROUTINE WILL RETURN TRUE (-1) OR FALSE (0) DEPENDING ON THE STATUS OF THE SECTOR YOU REQUEST TO READ.  tHE ACTUAL STATUS BYTE IS ALSO SAVED AT LOCATION (x'ffff').  iF YOU GET A FALSE READ (0), YOU CAN CHECK WHAT TYPE OF ERROR OCCURED BY peek(-1).  tHE RESULTING BITS WOULD BE SET FROM THE ERROR CONDITION AS FOLLOWS:bIT 7 = dRIVE not ready OR DROPPED READY.bIT 6 = nOT uSEDbIT 5 = nOT uSEDbIT 4 = sECTOR nOT fOUNDbIT 3 = crc eRROR IN data fIELDbIT 3 & 4 = crc eRROR IN id fIELDbIT 2 = dRIVE not in systembIT 1 = nOT uSEDbIT 0 = nOT uSED     iF YOU USE FALSE SECTORS ON THE DISK INSTEAD OF JUST RENAMING THEM TO A DIFFERENT NUMBER, YOU CAN CHECK THIS STATUS BYTE TO DETERMINE IF THE PROPER ERROR HAS OCCURED.     oN THE mOD i, THE DISK must BE IN SINGLE DENSITY.  yOU CAN CHANGE WHICH DRIVE IS READ BY: poke-176,X WHERE X IS AS FOLLOWS:  dRIVE 0=1, dRIVE 1=2, dRIVE 2=4, dRIVE 3=8.  oN THE mOD iii, YOU CAN READ SINGLE OR DOUBLE DENSITY DISKS.  tHE PROGRAM COMES INITIALIZED FOR DOUBLE DENSITY.  iF YOU WOULD LIKE TO READ SINGLE DENSITY: poke-106,66: poke-50,2:  yOU CAN ALSO CHANGE DRIVE NUMBERS USING THE FOLLOWING SCHEME:bIT 7 = dENSITY BIT (SET = DOUBLE)bIT 6 = must be setbIT 5 = must be resetbIT 4 = must be resetbIT 3 = dRIVE 3bIT 2 = dRIVE 2bIT 1 = dRIVE 1bIT 0 = dRIVE 0oNLY one DRIVE BIT MAY BE SET.  cOMPUTE YOUR VALUE AND POKE IT INTO -106.  tAKE THE SAME BYTE, BUT reset bit 6, AND POKE THIS VALUE INTO -50.      oNE MORE THING YOU MAY CHANGE.  wHEN YOU CALL THE ZERO MEMORY ROUTINE, IT LOADS A QUESTION MARK (?) INTO ALL MEMORY FROM 3c00h ON UP.  yOU CAN CHANGE THE VALUE BY: poke-7,X WHERE X IS THE VALUE YOU WANT MEMORY FILLED WITH.     iF YOU HAVE ANY FURTHER QUESTIONS, FEEL FREE TO CALL ME AT (214) 484-9428.                                             kIM wATT